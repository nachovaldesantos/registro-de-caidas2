<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Caídas de Residentes Mejorado</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js Data Labels Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #343a40;
        }
        .chart-container {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .chart-container canvas {
            background-color: white;
            width: 80%;
            max-width: 1200px; 
            height: 500px;
        }
    </style>
</head>
<body>
    <main class="container my-4">
        <!-- Gráfica: Lugar de las caídas en la habitación -->
        <div class="chart-container">
            <h3>% Lugar de las caídas en la habitación</h3>
            <canvas id="chartLugarHabitacion"></canvas>
        </div>

        <!-- Gráfica: Horas de las caídas -->
        <div class="chart-container">
            <h3>(%) Horas de las caídas</h3>
            <canvas id="chartHoras"></canvas>
        </div>
    </main>

    <script>
        // Datos para la gráfica de Lugar de las caídas en la habitación
        const lugarData = {
            labels: [
                'Al lado de la cama de la habitación',
                'En mitad de la habitación',
                'A los pies de la cama de la habitación',
                'En la puerta del baño de la habitación',
                'Dentro del baño de la habitación'
            ],
            datasets: [
                {
                    label: '2018-2019',
                    data: [30, 10, 5, 6, 15],
                    backgroundColor: 'rgba(255, 99, 132, 0.6)',
                },
                {
                    label: '2021-2022 (70 residentes)',
                    data: [37, 12, 8, 5, 11],
                    backgroundColor: 'rgba(255, 206, 86, 0.6)',
                },
                {
                    label: '2022-2023',
                    data: [29, 12, 5, 6, 12],
                    backgroundColor: 'rgba(54, 162, 235, 0.6)',
                }
            ]
        };

        // Configuración de la gráfica de Lugar de las caídas en la habitación
        const lugarConfig = {
            type: 'bar',
            data: lugarData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: '% Lugar de las caídas en la habitación'
                    }
                }
            }
        };

        // Datos para la gráfica de Horas de las caídas
        const horasData = {
            labels: [
                '8 a 10', '10 a 12', '12 a 14', '14 a 16', '16 a 18', '18 a 20', '20 a 22', '22 a 0', '0 a 2', '2 a 4', '4 a 6', '6 a 8'
            ],
            datasets: [
                {
                    label: '2018-2019',
                    data: [10, 10, 4, 6, 10, 8, 13, 10, 12, 6, 7, 8],
                    backgroundColor: 'rgba(153, 102, 255, 0.6)',
                },
                {
                    label: '2021-2022 (70 residentes)',
                    data: [20, 9, 7, 8, 16, 4, 15, 5, 3, 4, 5, 7],
                    backgroundColor: 'rgba(255, 159, 64, 0.6)',
                },
                {
                    label: '2022-2023',
                    data: [11, 8, 6, 5, 10, 8, 13, 10, 5, 4, 5, 5],
                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                }
            ]
        };

        // Configuración de la gráfica de Horas de las caídas
        const horasConfig = {
            type: 'bar',
            data: horasData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: '(%) Horas de las caídas'
                    }
                }
            }
        };

        // Renderizar las gráficas
        window.onload = function() {
            const lugarCtx = document.getElementById('chartLugarHabitacion').getContext('2d');
            new Chart(lugarCtx, lugarConfig);

            const horasCtx = document.getElementById('chartHoras').getContext('2d');
            new Chart(horasCtx, horasConfig);
        };
    </script>
</body>
</html>
